define(["exports","underscore"],function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(t),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},o={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},l=function(){function e(){a(this,e),this.defaultShortcutOption={type:"keydown",propagate:!1,disableInInput:!1,target:document,keycode:!1},this.allShortcuts={}}return r(e,[{key:"add",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a=n.default.defaults(a,this.defaultShortcutOption),e=e.toLowerCase();var r=n.default.isString(a.target)?document.getElementById(a.target):a.target,l=function(n){var r=void 0,l=void 0,c=0,d={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};if(n=n||window.event,a.disableInInput){var i=n.target?n.target:n.srcElement?n.srcElement:null;if(null!==i&&3===i.nodeType&&(i=i.parentNode),"INPUT"===i.tagName||"TEXTAREA"===i.tagName)return!1}if(n.keyCode?l=n.keyCode:n.which&&(l=n.which),r=188===l?",":190===l?".":String.fromCharCode(l).toLowerCase(),n.ctrlKey&&(d.ctrl.pressed=!0),n.shiftKey&&(d.shift.pressed=!0),n.altKey&&(d.alt.pressed=!0),n.metaKey&&(d.meta.pressed=!0),e.split("+").forEach(function(e){switch(e){case"ctrl":case"control":c++,d.ctrl.wanted=!0;break;case"shift":c++,d.shift.wanted=!0;break;case"alt":c++,d.alt.wanted=!0;break;case"meta":c++,d.meta.wanted=!0;break;default:e.length>1&&o[e]===l?c++:a.keycode?c++:r===e?c++:s[r]&&n.shiftKey&&(r=s[r])===k&&c++}}),c==keys.length&&d.ctrl.pressed===d.ctrl.wanted&&d.shift.pressed===d.shift.wanted&&d.alt.pressed===d.alt.wanted&&d.meta.pressed===d.meta.wanted&&(t(n),!a.propagate))return n.cancelBubble=!0,n.returnValue=!1,n.stopPropagation&&(n.stopPropagation(),n.preventDefault()),!1};this.allShortcuts[e]={callback:l,target:r,event:a.type},r.addEventListener?r.addEventListener(a.type,l,!1):r.attachEvent?r.attachEvent("on"+a.type,l):r["on"+a.type]=l}},{key:"remove",value:function(e){e=e.toLowerCase();var t=this.allShortcuts[e];if(delete this.allShortcuts[e],t){var a=t.event,n=t.target,r=t.callback;n.detachEvent?n.detachEvent("on"+a,r):n.removeEventListener?n.removeEventListener(a,r,!1):n["on"+a]=!1}}}]),e}();e.default=l});