define(["exports","underscore"],function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(t),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},s={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},l=function(){function e(){a(this,e),this.defaultShortcutOption={type:"keydown",propagate:!1,disableInInput:!1,target:document,keycode:!1},this.allShortcuts={}}return r(e,[{key:"getKeycode",value:function(e){return e.keyCode?e.keyCode:e.which?e.which:0}},{key:"getChar",value:function(e){return 188===e?",":190===e?".":String.fromCharCode(e).toLowerCase()}},{key:"isInput",value:function(e){var t=e.target?e.target:e.srcElement?e.srcElement:null;return null!==t&&3===t.nodeType&&(t=t.parentNode),"INPUT"===t.tagName||"TEXTAREA"===t.tagName}},{key:"add",value:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r=n.default.defaults(r,this.defaultShortcutOption),e=e.toLowerCase();var l=n.default.isString(r.target)?document.getElementById(r.target):r.target,c=function(n){var l=void 0,c=void 0,u=0,d=e.split("+"),i={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};return n=n||window.event,(!r.disableInInput||!a.isInput(n))&&(c=a.getKeycode(n),l=a.getChar(c),n.ctrlKey&&(i.ctrl.pressed=!0),n.shiftKey&&(i.shift.pressed=!0),n.altKey&&(i.alt.pressed=!0),n.metaKey&&(i.meta.pressed=!0),d.forEach(function(e){switch(e){case"ctrl":case"control":u++,i.ctrl.wanted=!0;break;case"shift":u++,i.shift.wanted=!0;break;case"alt":u++,i.alt.wanted=!0;break;case"meta":u++,i.meta.wanted=!0;break;default:e.length>1&&s[e]===c?u++:r.keycode?u++:l===e?u++:o[l]&&n.shiftKey&&(l=o[l])===k&&u++}}),u!=d.length||i.ctrl.pressed!==i.ctrl.wanted||i.shift.pressed!==i.shift.wanted||i.alt.pressed!==i.alt.wanted||i.meta.pressed!==i.meta.wanted||(t(n),r.propagate)?void 0:(n.cancelBubble=!0,n.returnValue=!1,n.stopPropagation&&(n.stopPropagation(),n.preventDefault()),!1))};return this.allShortcuts[e]={callback:c,target:l,event:r.type},l.addEventListener?l.addEventListener(r.type,c,!1):l.attachEvent?l.attachEvent("on"+r.type,c):l["on"+r.type]=c,this}},{key:"remove",value:function(e){e=e.toLowerCase();var t=this.allShortcuts[e];if(delete this.allShortcuts[e],t){var a=t.event,n=t.target,r=t.callback;return n.detachEvent?n.detachEvent("on"+a,r):n.removeEventListener?n.removeEventListener(a,r,!1):n["on"+a]=!1,this}}}]),e}();e.default=l});