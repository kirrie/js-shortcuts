"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),SHIFTNUMS={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},SPECIALKEYS={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},MODIFIERS={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}},Keycuts=function(){function e(){_classCallCheck(this,e),this.defaultShortcutOption={type:"keydown",propagate:!1,disableInInput:!1,target:document,keycode:!1},this.allShortcuts={}}return _createClass(e,[{key:"add",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};a=_underscore2.default.defaults(a,this.defaultShortcutOption),e=e.toLowerCase();var r=_underscore2.default.isString(a.target)?document.getElementById(a.target):a.target,n=function(r){var n=void 0,s=void 0,o=0,l=e.split("+"),c={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};if(r=r||window.event,a.disableInInput){var d=r.target?r.target:r.srcElement?r.srcElement:null;if(null!==d&&3===d.nodeType&&(d=d.parentNode),"INPUT"===d.tagName||"TEXTAREA"===d.tagName)return!1}if(r.keyCode?s=r.keyCode:r.which&&(s=r.which),n=188===s?",":190===s?".":String.fromCharCode(s).toLowerCase(),r.ctrlKey&&(c.ctrl.pressed=!0),r.shiftKey&&(c.shift.pressed=!0),r.altKey&&(c.alt.pressed=!0),r.metaKey&&(c.meta.pressed=!0),l.forEach(function(e){switch(e){case"ctrl":case"control":o++,c.ctrl.wanted=!0;break;case"shift":o++,c.shift.wanted=!0;break;case"alt":o++,c.alt.wanted=!0;break;case"meta":o++,c.meta.wanted=!0;break;default:e.length>1&&SPECIALKEYS[e]===s?o++:a.keycode?o++:n===e?o++:SHIFTNUMS[n]&&r.shiftKey&&(n=SHIFTNUMS[n])===k&&o++}}),o==l.length&&c.ctrl.pressed===c.ctrl.wanted&&c.shift.pressed===c.shift.wanted&&c.alt.pressed===c.alt.wanted&&c.meta.pressed===c.meta.wanted&&(t(r),!a.propagate))return r.cancelBubble=!0,r.returnValue=!1,r.stopPropagation&&(r.stopPropagation(),r.preventDefault()),!1};this.allShortcuts[e]={callback:n,target:r,event:a.type},r.addEventListener?r.addEventListener(a.type,n,!1):r.attachEvent?r.attachEvent("on"+a.type,n):r["on"+a.type]=n}},{key:"remove",value:function(e){e=e.toLowerCase();var t=this.allShortcuts[e];if(delete this.allShortcuts[e],t){var a=t.event,r=t.target,n=t.callback;r.detachEvent?r.detachEvent("on"+a,n):r.removeEventListener?r.removeEventListener(a,n,!1):r["on"+a]=!1}}}]),e}();exports.default=Keycuts;